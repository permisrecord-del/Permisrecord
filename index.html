<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Permis Record | Votre auto-école en ligne</title>
    <!-- Chargement de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuration de la police Inter -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000; /* Fond noir */
            color: #E2E8F0; /* Texte gris clair par défaut */
        }
        .gold-text {
            color: #FFD700; /* Couleur Or */
        }
        .gold-border {
            border-color: #FFD700; /* Couleur Or */
        }
        .gold-bg {
            background-color: #FFD700; /* Couleur Or */
        }
        /* Assure que le body prend toute la hauteur et que le footer reste en bas */
        .min-h-screen {
            display: flex;
            flex-direction: column;
        }
        main {
            flex-grow: 1;
        }
    </style>
</head>
<body class="min-h-screen">

    <!-- En-tête (Header) -->
    <header class="bg-gray-900 shadow-xl sticky top-0 z-10">
        <div class="max-w-4xl mx-auto px-4 py-4 flex flex-col sm:flex-row justify-between items-center">
            
            <div class="mb-2 sm:mb-0 text-center sm:text-left">
                <h1 class="text-3xl font-extrabold gold-text">
                    PERMIS RECORD
                </h1>
                <p class="text-sm text-gray-400">La route vers votre liberté</p>
            </div>
            
            <!-- Numéro de téléphone ajouté ici -->
            <a href="tel:+33767739780" class="flex items-center text-lg font-bold text-white hover:gold-text transition duration-200 mt-2 sm:mt-0 p-2 rounded-lg bg-gray-800 border gold-border border-opacity-30">
                <!-- Icône de téléphone -->
                <span class="gold-text mr-2 text-xl">&#9742;</span>
                <span class="tracking-wider">07 67 73 97 80</span>
            </a>
            
        </div>

        <!-- Navigation principale par onglets - Mis à jour pour 6 boutons (w-1/6) -->
        <nav class="bg-gray-800 border-t border-b gold-border">
            <div class="max-w-4xl mx-auto flex justify-around text-center">
                <button onclick="showSection('conduite')" class="tab-button w-1/6 py-3 px-1 text-xs sm:text-sm font-semibold transition duration-300 hover:bg-gray-700" data-target="conduite">
                    Conduite
                </button>
                <button onclick="showSection('inscription')" class="tab-button w-1/6 py-3 px-1 text-xs sm:text-sm font-semibold transition duration-300 hover:bg-gray-700" data-target="inscription">
                    Inscription
                </button>
                <button onclick="showSection('tarifs')" class="tab-button w-1/6 py-3 px-1 text-xs sm:text-sm font-semibold transition duration-300 hover:bg-gray-700" data-target="tarifs">
                    Tarifs
                </button>
                <button onclick="showSection('examen')" class="tab-button w-1/6 py-3 px-1 text-xs sm:text-sm font-semibold transition duration-300 hover:bg-gray-700" data-target="examen">
                    Examen
                </button>
                <button onclick="showSection('code')" class="tab-button w-1/6 py-3 px-1 text-xs sm:text-sm font-semibold transition duration-300 hover:bg-gray-700" data-target="code">
                    Code
                </button>
                <button onclick="showSection('legales')" class="tab-button w-1/6 py-3 px-1 text-xs sm:text-sm font-semibold transition duration-300 hover:bg-gray-700" data-target="legales">
                    Infos Légales
                </button>
            </div>
        </nav>
    </header>

    <!-- Contenu principal -->
    <main class="max-w-4xl mx-auto p-4 sm:p-8">

        <!-- Message de confirmation/erreur (Modal Mockup) -->
        <div id="message-box" class="fixed inset-0 bg-black bg-opacity-75 hidden items-center justify-center z-50 p-4">
            <div class="bg-gray-800 p-6 rounded-xl shadow-2xl w-full max-w-sm border-t-4 gold-border">
                <h3 id="message-title" class="text-xl font-bold gold-text mb-3">Confirmation</h3>
                <p id="message-content" class="text-gray-300 mb-5">Votre demande a été enregistrée avec succès.</p>
                <button onclick="hideMessage()" class="w-full py-2 px-4 rounded-lg gold-bg text-gray-900 font-bold hover:bg-yellow-400 transition duration-200">
                    Fermer
                </button>
            </div>
        </div>


        <!-- SECTION 1: Réservation d'heures de conduite -->
        <section id="conduite" class="content-section">
            <div class="p-6 bg-gray-900 rounded-xl shadow-lg border gold-border border-opacity-30">
                <h2 class="text-2xl font-bold gold-text mb-6 border-b pb-2 border-gray-700">Réservez vos Heures de Conduite</h2>
                
                <form onsubmit="handleFormSubmission(event, 'conduite')" class="space-y-4 mb-8">
                    <!-- Email de l'élève (Ajouté pour identifier le réservateur) -->
                    <div>
                        <label for="lesson-email" class="block text-sm font-medium text-gray-400">Votre Email (obligatoire)</label>
                        <input type="email" id="lesson-email" required placeholder="nom.prenom@example.com" class="mt-1 block w-full p-3 rounded-lg bg-gray-700 border-gray-600 focus:ring-yellow-500 focus:border-yellow-500 text-white">
                    </div>

                    <!-- Type de leçon -->
                    <div>
                        <label for="lesson-type" class="block text-sm font-medium text-gray-400">Type de Leçon</label>
                        <select id="lesson-type" required class="mt-1 block w-full p-3 rounded-lg bg-gray-700 border-gray-600 focus:ring-yellow-500 focus:border-yellow-500 text-white">
                            <option value="">Sélectionnez un type</option>
                            <option value="initiale">Leçon initiale (2h)</option>
                            <option value="perfectionnement">Perfectionnement (1h)</option>
                            <option value="conduite_accompagnee">Conduite Accompagnée (2h)</option>
                        </select>
                    </div>

                    <!-- Date souhaitée -->
                    <div>
                        <label for="lesson-date" class="block text-sm font-medium text-gray-400">Date Souhaitée</label>
                        <input type="date" id="lesson-date" required class="mt-1 block w-full p-3 rounded-lg bg-gray-700 border-gray-600 focus:ring-yellow-500 focus:border-yellow-500 text-white">
                    </div>

                    <!-- Heure souhaitée -->
                    <div>
                        <label for="lesson-time" class="block text-sm font-medium text-gray-400">Heure de Début</label>
                        <input type="time" id="lesson-time" required min="08:00" max="18:00" class="mt-1 block w-full p-3 rounded-lg bg-gray-700 border-gray-600 focus:ring-yellow-500 focus:border-yellow-500 text-white">
                    </div>

                    <button type="submit" class="w-full py-3 px-4 mt-6 rounded-lg gold-bg text-gray-900 font-bold text-lg transition duration-200 shadow-md hover:shadow-yellow-500/50">
                        Réserver ma Leçon
                    </button>
                </form>

                <!-- Zone d'affichage des Réservations (l'alerte pour l'administrateur) -->
                <div class="mt-10 pt-6 border-t border-gray-700">
                    <h3 class="text-xl font-bold gold-text mb-4">Tableau de Bord des Réservations (Admin)</h3>
                    <p id="reservation-loading" class="text-gray-500 text-sm">Chargement des réservations en cours...</p>
                    <div id="reservation-list" class="space-y-3">
                        <!-- Les réservations seront injectées ici par JavaScript -->
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: Inscription de l'élève -->
        <section id="inscription" class="content-section hidden">
            <div class="p-6 bg-gray-900 rounded-xl shadow-lg border gold-border border-opacity-30">
                <h2 class="text-2xl font-bold gold-text mb-6 border-b pb-2 border-gray-700">Inscription à l'Auto-École</h2>
                <p class="text-gray-400 mb-6">Veuillez remplir ce formulaire pour créer votre dossier élève et commencer votre formation.</p>

                <form onsubmit="handleFormSubmission(event, 'inscription')" class="space-y-4">
                    <!-- Section Identité -->
                    <h3 class="text-lg font-semibold gold-text pt-2">Informations Personnelles</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label for="reg-lastname" class="block text-sm font-medium text-gray-400">Nom</label>
                            <input type="text" id="reg-lastname" required class="mt-1 block w-full p-3 rounded-lg bg-gray-700 border-gray-600 focus:ring-yellow-500 focus:border-yellow-500 text-white">
                        </div>
                        <div>
                            <label for="reg-firstname" class="block text-sm font-medium text-gray-400">Prénom</label>
                            <input type="text" id="reg-firstname" required class="mt-1 block w-full p-3 rounded-lg bg-gray-700 border-gray-600 focus:ring-yellow-500 focus:border-yellow-500 text-white">
                        </div>
                    </div>
                    <div>
                        <label for="reg-dob" class="block text-sm font-medium text-gray-400">Date de Naissance</label>
                        <input type="date" id="reg-dob" required class="mt-1 block w-full p-3 rounded-lg bg-gray-700 border-gray-600 focus:ring-yellow-500 focus:border-yellow-500 text-white">
                    </div>

                    <!-- Section Contact -->
                    <h3 class="text-lg font-semibold gold-text pt-4">Coordonnées</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label for="reg-email" class="block text-sm font-medium text-gray-400">Email</label>
                            <input type="email" id="reg-email" required class="mt-1 block w-full p-3 rounded-lg bg-gray-700 border-gray-600 focus:ring-yellow-500 focus:border-yellow-500 text-white">
                        </div>
                        <div>
                            <label for="reg-phone" class="block text-sm font-medium text-gray-400">Téléphone</label>
                            <input type="tel" id="reg-phone" required class="mt-1 block w-full p-3 rounded-lg bg-gray-700 border-gray-600 focus:ring-yellow-500 focus:border-yellow-500 text-white">
                        </div>
                    </div>
                    
                    <!-- Section Formation -->
                    <h3 class="text-lg font-semibold gold-text pt-4">Choix de la Formation</h3>
                    <div>
                        <label for="reg-permit" class="block text-sm font-medium text-gray-400">Permis Souhaité</label>
                        <select id="reg-permit" required class="mt-1 block w-full p-3 rounded-lg bg-gray-700 border-gray-600 focus:ring-yellow-500 focus:border-yellow-500 text-white">
                            <option value="">Sélectionnez un permis</option>
                            <option value="B">Permis B (Voiture)</option>
                            <option value="A2">Permis A2 (Moto)</option>
                            <option value="AAC">Conduite Accompagnée (AAC)</option>
                            <option value="Code">Uniquement Code de la Route</option>
                        </select>
                    </div>
                    
                    <!-- Consentement -->
                    <div class="flex items-start pt-4">
                        <input id="reg-cgv" type="checkbox" required class="h-4 w-4 rounded gold-bg border-gray-300 text-yellow-600 focus:ring-yellow-500">
                        <label for="reg-cgv" class="ml-3 text-sm text-gray-400">
                            J'accepte les <a href="#" onclick="showSection('legales'); return false;" class="gold-text hover:underline">Conditions Générales de Vente</a> et la Politique de Confidentialité.
                        </label>
                    </div>

                    <button type="submit" class="w-full py-3 px-4 mt-6 rounded-lg gold-bg text-gray-900 font-bold text-lg transition duration-200 shadow-md hover:shadow-yellow-500/50">
                        Soumettre mon Dossier d'Inscription
                    </button>
                </form>
            </div>
        </section>

        <!-- NOUVELLE SECTION 3: Tarifs et Forfaits -->
        <section id="tarifs" class="content-section hidden">
            <div class="p-6 bg-gray-900 rounded-xl shadow-lg border gold-border border-opacity-30">
                <h2 class="text-2xl font-bold gold-text mb-6 border-b pb-2 border-gray-700">Nos Tarifs et Forfaits Compétitifs</h2>
                <p class="text-gray-400 mb-8">Choisissez la formule qui convient le mieux à vos objectifs et à votre budget. Tous nos forfaits incluent les frais de dossier et l'accès à la plateforme Code en ligne.</p>

                <!-- Grille des Forfaits -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

                    <!-- Forfait 1: Code Seul -->
                    <div class="bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-700 hover:border-yellow-500 transition duration-300">
                        <h3 class="text-xl font-bold gold-text mb-2">Code de la Route (ETG)</h3>
                        <p class="text-3xl font-extrabold gold-text mb-4">199 €</p>
                        <ul class="text-gray-300 space-y-2 text-sm">
                            <li class="flex items-center">
                                <span class="gold-text mr-2">✓</span> Accès illimité plateforme en ligne (6 mois)
                            </li>
                            <li class="flex items-center">
                                <span class="gold-text mr-2">✓</span> Suivi de progression personnalisé
                            </li>
                            <li class="flex items-center">
                                <span class="gold-text mr-2">✓</span> 1 Présentation à l'examen théorique
                            </li>
                            <li class="flex items-center text-gray-500">
                                <span class="text-gray-600 mr-2">✗</span> Heures de conduite
                            </li>
                        </ul>
                        <button onclick="showMessage('Achat Code', 'Vous serez redirigé vers le paiement pour le Forfait Code. Merci !')" class="w-full mt-6 py-3 rounded-lg gold-bg text-gray-900 font-bold hover:bg-yellow-400 transition duration-200">
                            S'inscrire au Code
                        </button>
                    </div>

                    <!-- Forfait 2: Permis B (20h) -->
                    <div class="bg-gray-800 p-6 rounded-xl shadow-2xl border-4 gold-border ring-2 ring-yellow-500">
                        <h3 class="text-xl font-bold gold-text mb-2">Permis B Standard (20h)</h3>
                        <p class="text-3xl font-extrabold gold-text mb-4">1199 €</p>
                        <ul class="text-gray-300 space-y-2 text-sm">
                            <li class="flex items-center">
                                <span class="gold-text mr-2">✓</span> Forfait Code Inclus (Accès 1 an)
                            </li>
                            <li class="flex items-center">
                                <span class="gold-text mr-2">✓</span> **20 Heures de Conduite** obligatoires
                            </li>
                            <li class="flex items-center">
                                <span class="gold-text mr-2">✓</span> Évaluation de départ
                            </li>
                            <li class="flex items-center">
                                <span class="gold-text mr-2">✓</span> 1 Présentation à l'examen pratique
                            </li>
                        </ul>
                        <button onclick="showSection('inscription')" class="w-full mt-6 py-3 rounded-lg gold-bg text-gray-900 font-bold hover:bg-yellow-400 transition duration-200">
                            Je m'inscris au Permis B
                        </button>
                    </div>

                    <!-- Forfait 3: Conduite Accompagnée -->
                    <div class="bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-700 hover:border-yellow-500 transition duration-300">
                        <h3 class="text-xl font-bold gold-text mb-2">Conduite Accompagnée (AAC)</h3>
                        <p class="text-3xl font-extrabold gold-text mb-4">1499 €</p>
                        <ul class="text-gray-300 space-y-2 text-sm">
                            <li class="flex items-center">
                                <span class="gold-text mr-2">✓</span> Forfait Code Inclus (Accès 1 an)
                            </li>
                            <li class="flex items-center">
                                <span class="gold-text mr-2">✓</span> **25 Heures de Conduite** initiales
                            </li>
                            <li class="flex items-center">
                                <span class="gold-text mr-2">✓</span> Rendez-vous pédagogiques obligatoires
                            </li>
                            <li class="flex items-center">
                                <span class="gold-text mr-2">✓</span> 1 Présentation à l'examen pratique
                            </li>
                        </ul>
                        <button onclick="showSection('inscription')" class="w-full mt-6 py-3 rounded-lg gold-bg text-gray-900 font-bold hover:bg-yellow-400 transition duration-200">
                            Je m'inscris à l'AAC
                        </button>
                    </div>
                </div>
                
                <!-- Tarif Unitaire MODIFIÉ À 50 € -->
                <div class="mt-10 p-4 bg-gray-900 border-t border-b border-gray-700 rounded-lg">
                    <p class="text-lg font-semibold gold-text">Tarif de l'Heure de Conduite Unitaire :</p>
                    <p class="text-xl font-extrabold text-gray-300 mt-1">50 € / heure</p>
                    <p class="text-sm text-gray-500 mt-2">Ce tarif s'applique après l'épuisement des heures incluses dans un forfait.</p>
                </div>

            </div>
        </section>


        <!-- SECTION 4: Réservation de date d'examen -->
        <section id="examen" class="content-section hidden">
            <div class="p-6 bg-gray-900 rounded-xl shadow-lg border gold-border border-opacity-30">
                <h2 class="text-2xl font-bold gold-text mb-6 border-b pb-2 border-gray-700">Inscription à l'Examen Pratique</h2>

                <form onsubmit="handleFormSubmission(event, 'examen')" class="space-y-4">
                    <!-- Permis concerné -->
                    <div>
                        <label for="exam-type" class="block text-sm font-medium text-gray-400">Permis Concerné</label>
                        <select id="exam-type" required class="mt-1 block w-full p-3 rounded-lg bg-gray-700 border-gray-600 focus:ring-yellow-500 focus:border-yellow-500 text-white">
                            <option value="">Sélectionnez le type de permis</option>
                            <option value="B">Permis B (Voiture)</option>
                            <option value="A2">Permis A2 (Moto)</option>
                            <option value="BE">Permis BE (Remorque)</option>
                        </select>
                    </div>

                    <!-- 1ère date souhaitée -->
                    <div>
                        <label for="exam-date-1" class="block text-sm font-medium text-gray-400">1ère Date Préférée</label>
                        <input type="date" id="exam-date-1" required class="mt-1 block w-full p-3 rounded-lg bg-gray-700 border-gray-600 focus:ring-yellow-500 focus:border-yellow-500 text-white">
                    </div>

                    <!-- 2ème date souhaitée -->
                    <div>
                        <label for="exam-date-2" class="block text-sm font-medium text-gray-400">2ème Date Préférée (Optionnel)</label>
                        <input type="date" id="exam-date-2" class="mt-1 block w-full p-3 rounded-lg bg-gray-700 border-gray-600 focus:ring-yellow-500 focus:border-yellow-500 text-white">
                    </div>

                    <!-- Message -->
                    <div>
                        <label for="exam-message" class="block text-sm font-medium text-gray-400">Commentaires (ex: créneau horaire préféré)</label>
                        <textarea id="exam-message" rows="3" class="mt-1 block w-full p-3 rounded-lg bg-gray-700 border-gray-600 focus:ring-yellow-500 focus:border-yellow-500 text-white"></textarea>
                    </div>

                    <button type="submit" class="w-full py-3 px-4 mt-6 rounded-lg gold-bg text-gray-900 font-bold text-lg transition duration-200 shadow-md hover:shadow-yellow-500/50">
                        Soumettre ma Demande
                    </button>
                </form>
            </div>
        </section>

        <!-- SECTION 5: Révision du Code de la Route en Ligne -->
        <section id="code" class="content-section hidden">
            <div class="p-6 bg-gray-900 rounded-xl shadow-lg border gold-border border-opacity-30">
                <h2 class="text-2xl font-bold gold-text mb-6 border-b pb-2 border-gray-700">Révision du Code de la Route en Ligne</h2>
                <p class="text-gray-400 mb-6">Préparez-vous à l'examen du Code de la Route avec nos séries de tests thématiques.</p>

                <!-- Zone de progression (Mock-up) -->
                <div class="mb-8 p-4 bg-gray-800 rounded-lg">
                    <h3 class="text-xl font-semibold gold-text mb-2">Votre Progression</h3>
                    <div class="w-full bg-gray-700 rounded-full h-2.5 mb-4">
                        <div class="gold-bg h-2.5 rounded-full" style="width: 65%"></div>
                    </div>
                    <p class="text-sm text-gray-400">65% des thèmes couverts. Bonne route !</p>
                </div>

                <!-- Grille des séries de tests -->
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">

                    <!-- Carte de série de test -->
                    <div class="p-4 bg-gray-800 rounded-lg border border-gray-700 hover:border-yellow-500 transition duration-300">
                        <h4 class="text-lg font-bold gold-text">Série Thématique 1: Signalisation</h4>
                        <p class="text-gray-400 text-sm mb-3">Panneaux de danger, d'interdiction et d'obligation.</p>
                        <button onclick="showMessage('Code Lancé', 'Vous avez démarré la Série 1. Bon courage !')" class="w-full py-2 px-4 rounded-lg gold-bg text-gray-900 font-bold text-sm hover:bg-yellow-400 transition duration-200">
                            Commencer le Test (40 questions)
                        </button>
                    </div>

                    <div class="p-4 bg-gray-800 rounded-lg border border-gray-700 hover:border-yellow-500 transition duration-300">
                        <h4 class="text-lg font-bold gold-text">Série Thématique 2: Priorités et Intersections</h4>
                        <p class="text-gray-400 text-sm mb-3">Règles de priorité, carrefours et ronds-points.</p>
                        <button onclick="showMessage('Code Lancé', 'Vous avez démarré la Série 2. Bonne chance !')" class="w-full py-2 px-4 rounded-lg gold-bg text-gray-900 font-bold text-sm hover:bg-yellow-400 transition duration-200">
                            Commencer le Test (40 questions)
                        </button>
                    </div>

                    <div class="p-4 bg-gray-800 rounded-lg border border-gray-700 hover:border-yellow-500 transition duration-300">
                        <h4 class="text-lg font-bold gold-text">Série Thématique 3: Vitesse et Distances</h4>
                        <p class="text-gray-400 text-sm mb-3">Limitations de vitesse et distances de sécurité.</p>
                        <button onclick="showMessage('Code Lancé', 'Vous avez démarré la Série 3. Concentrez-vous !')" class="w-full py-2 px-4 rounded-lg gold-bg text-gray-900 font-bold text-sm hover:bg-yellow-500/50">
                            Commencer le Test (40 questions)
                        </button>
                    </div>

                    <div class="p-4 bg-gray-800 rounded-lg border border-gray-700 opacity-60">
                        <h4 class="text-lg font-bold gold-text">Série Thématique 4: Secourisme</h4>
                        <p class="text-gray-400 text-sm mb-3">Thème à venir !</p>
                        <button disabled class="w-full py-2 px-4 rounded-lg bg-gray-600 text-gray-400 font-bold text-sm cursor-not-allowed">
                            Indisponible
                        </button>
                    </div>

                </div>

            </div>
        </section>
        
        <!-- SECTION 6: Informations Légales -->
        <section id="legales" class="content-section hidden">
            <div class="p-6 bg-gray-900 rounded-xl shadow-lg border gold-border border-opacity-30">
                <h2 class="text-2xl font-bold gold-text mb-6 border-b pb-2 border-gray-700">Informations Légales et Conditions Générales</h2>

                <div class="space-y-8">
                    <!-- Mentions Légales (Mock-up) -->
                    <article>
                        <h3 class="text-xl font-semibold gold-text mb-3 border-b border-gray-700 pb-1">1. Mentions Légales</h3>
                        <p class="text-gray-400 mb-2">
                            Ce site est édité par **PERMIS RECORD SAS** (Société par Actions Simplifiée).
                        </p>
                        <ul class="list-disc list-inside ml-4 mt-2 text-gray-500 text-sm space-y-1">
                            <li>Raison Sociale : PERMIS RECORD SAS</li>
                            <li>N° SIRET : 123 456 789 00010 (Fictif)</li>
                            <li>Siège Social : 10 Rue de la Liberté, 75001 Paris, France</li>
                            <li>Directeur de la publication : M. Alex Dupond</li>
                            <li>Hébergeur : Fictif Hosting S.A.</li>
                            <li>Téléphone : <a href="tel:+33767739780" class="gold-text hover:underline">07 67 73 97 80</a></li>
                            <li>Contact (Email) : permisrecord@gmail.com</li>
                        </ul>
                    </article>

                    <!-- Conditions Générales de Vente (Mock-up) -->
                    <article>
                        <h3 class="text-xl font-semibold gold-text mb-3 border-b border-gray-700 pb-1">2. Conditions Générales de Vente (CGV)</h3>
                        <p class="text-gray-400 mb-2">
                            Toute réservation de service est soumise aux Conditions Générales de Vente. Extraits clés :
                        </p>
                        <ul class="list-disc list-inside ml-4 mt-2 text-gray-500 text-sm space-y-1">
                            <li>**Annulation des Leçons :** Toute annulation doit être notifiée 48 heures à l'avance, faute de quoi la leçon est due.</li>
                            <li>**Validité des Formations :** Les forfaits (Code ou Conduite) sont valables 12 mois à compter de la date d'achat.</li>
                            <li>**Frais d'Examen :** La présentation à l'examen pratique est conditionnée au niveau de l'élève, décidé par l'équipe pédagogique.</li>
                        </ul>
                    </article>

                    <!-- Politique de Confidentialité (Mock-up) -->
                    <article>
                        <h3 class="text-xl font-semibold gold-text mb-3 border-b border-gray-700 pb-1">3. Politique de Confidentialité</h3>
                        <p class="text-gray-400">
                            Nous collectons vos données (nom, email, historique de réservation) uniquement pour la gestion de votre dossier et le suivi pédagogique. Elles sont stockées en France et protégées conformément au Règlement Général sur la Protection des Données (RGPD).
                        </p>
                    </article>
                </div>
            </div>
        </section>

    </main>
    
    <!-- Pied de page (Footer) -->
    <footer class="bg-gray-900 mt-8 py-4 px-4 text-center text-xs text-gray-600 border-t border-gray-800">
        <p>&copy; 2025 PERMIS RECORD SAS. Tous droits réservés.</p>
        <p class="mt-1">
            <!-- Les liens dans le footer pointent vers la section Légales -->
            <a href="#" onclick="showSection('legales'); return false;" class="hover:text-gold-text mx-2 text-gray-500 hover:text-yellow-500 transition duration-200">Mentions Légales</a> |
            <a href="#" onclick="showSection('legales'); return false;" class="hover:text-gold-text mx-2 text-gray-500 hover:text-yellow-500 transition duration-200">CGV</a> |
            <a href="#" onclick="showSection('legales'); return false;" class="hover:text-gold-text mx-2 text-gray-500 hover:text-yellow-500 transition duration-200">Confidentialité</a>
        </p>
    </footer>

    <!-- JavaScript pour la gestion des onglets, des formulaires et de Firebase -->
    <script type="module">
        // Importations Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, setPersistence, browserSessionPersistence } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, addDoc, onSnapshot, collection, query, where, serverTimestamp, getDoc, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Variables globales pour Firebase et l'utilisateur
        let db;
        let auth;
        let userId = null;
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        // Référence à la collection (publique pour que l'admin puisse la consulter)
        const RESERVATIONS_COLLECTION_PATH = `/artifacts/${appId}/public/data/reservations`;

        /**
         * Initialise Firebase et authentifie l'utilisateur.
         */
        async function initializeFirebase() {
            try {
                // Configuration des logs de Firebase pour le débogage
                setLogLevel('debug');
                
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                
                // Assurer la persistance de session (facultatif mais bonne pratique)
                await setPersistence(auth, browserSessionPersistence);

                // Authentification
                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }

                // Attendre l'état d'authentification pour obtenir l'ID utilisateur
                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        userId = user.uid;
                        console.log("Firebase Auth Ready. User ID:", userId);
                        // Lancer l'écoute des données une fois que l'auth est prête
                        setupReservationsListener(); 
                    } else {
                        userId = crypto.randomUUID(); // Utiliser un ID temporaire si anonyme
                        console.warn("Signed in anonymously. Using generated ID:", userId);
                        setupReservationsListener();
                    }
                });

            } catch (error) {
                console.error("Erreur lors de l'initialisation de Firebase:", error);
                showMessage("Erreur Système", "Impossible de se connecter à la base de données. Veuillez réessayer plus tard.");
            }
        }
        
        /**
         * Écoute en temps réel les nouvelles réservations (l'alerte admin).
         */
        function setupReservationsListener() {
            if (!db || !userId) {
                console.warn("Database or User ID not ready. Listener skipped.");
                return;
            }

            const q = collection(db, RESERVATIONS_COLLECTION_PATH);
            const listElement = document.getElementById('reservation-list');
            const loadingElement = document.getElementById('reservation-loading');
            
            // onSnapshot écoute les changements en temps réel
            onSnapshot(q, (snapshot) => {
                const reservations = [];
                snapshot.forEach((doc) => {
                    // Récupérer les données et l'ID du document
                    reservations.push({ id: doc.id, ...doc.data() });
                });

                // Trier les réservations par date de création (la plus récente d'abord)
                reservations.sort((a, b) => b.createdAt.toDate() - a.createdAt.toDate());

                // Affichage
                loadingElement.classList.add('hidden');
                listElement.innerHTML = ''; // Nettoyer la liste
                
                if (reservations.length === 0) {
                    listElement.innerHTML = '<p class="text-gray-500">Aucune réservation en attente.</p>';
                } else {
                    reservations.forEach(reservation => {
                        const lessonDate = new Date(reservation.date + 'T' + reservation.time).toLocaleDateString('fr-FR', { 
                            weekday: 'short', year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' 
                        });
                        
                        const item = document.createElement('div');
                        item.className = 'p-3 bg-gray-800 rounded-lg border border-gray-700 hover:border-yellow-500 transition duration-200';
                        item.innerHTML = `
                            <p class="text-sm font-bold gold-text">Nouvelle Réservation (#${reservation.id.substring(0, 4)})</p>
                            <p class="text-gray-300 mt-1">
                                <span class="font-semibold">${reservation.email}</span> a réservé une leçon de type <span class="font-semibold">${reservation.type}</span>.
                            </p>
                            <p class="text-xs text-gray-500 mt-1">
                                Date & Heure : ${lessonDate}
                            </p>
                        `;
                        listElement.appendChild(item);
                    });
                }
                
                // Alerte visuelle : Mettre en évidence la section Conduite si de nouvelles réservations arrivent (simple notification)
                const conduiteTab = document.querySelector(`.tab-button[data-target="conduite"]`);
                if (reservations.length > 0 && !conduiteTab.classList.contains('gold-text')) {
                     // Petite animation d'alerte pour l'admin
                     conduiteTab.style.boxShadow = '0 0 10px #FFD700';
                     setTimeout(() => conduiteTab.style.boxShadow = 'none', 1000);
                }

            }, (error) => {
                console.error("Erreur d'écoute Firestore:", error);
                listElement.innerHTML = '<p class="text-red-500">Erreur de connexion aux réservations.</p>';
            });
        }


        // Fonction pour afficher une section spécifique et mettre à jour le style des boutons
        function showSection(targetId) {
            // Cacher toutes les sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.add('hidden');
            });
            // Réinitialiser les styles de tous les boutons
            document.querySelectorAll('.tab-button').forEach(button => {
                // S'assurer que les classes de mise en évidence sont retirées
                button.classList.remove('gold-text', 'bg-gray-700', 'border-b-4', 'gold-border');
                // Réappliquer les styles de base pour un état non sélectionné
                button.classList.add('text-gray-400');
            });

            // Afficher la section cible
            const targetSection = document.getElementById(targetId);
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }

            // Mettre en évidence le bouton actif
            const activeTab = document.querySelector(`.tab-button[data-target="${targetId}"]`);
            if (activeTab) {
                activeTab.classList.remove('text-gray-400');
                activeTab.classList.add('gold-text', 'bg-gray-700', 'border-b-4', 'gold-border');
            }
        }

        // Fonction pour afficher le message modal (remplace alert/confirm)
        function showMessage(title, content) {
            document.getElementById('message-title').textContent = title;
            document.getElementById('message-content').innerHTML = content; // Utiliser innerHTML pour le HTML dans le message
            document.getElementById('message-box').classList.remove('hidden');
            document.getElementById('message-box').classList.add('flex');
        }

        // Fonction pour masquer le message modal
        function hideMessage() {
            document.getElementById('message-box').classList.add('hidden');
            document.getElementById('message-box').classList.remove('flex');
        }

        // Gestionnaire de soumission de formulaire
        async function handleFormSubmission(event, formType) {
            event.preventDefault(); // Empêche l'envoi réel du formulaire

            if (!db) {
                showMessage("Erreur de Connexion", "La base de données n'est pas initialisée. Veuillez rafraîchir la page.");
                return;
            }

            let title = "Demande Enregistrée";
            let content = "Votre demande a bien été reçue par l'équipe Permis Record.";

            // Logique de soumission pour les Réservations de Conduite (Sauvegarde dans Firestore)
            if (formType === 'conduite') {
                const email = document.getElementById('lesson-email').value;
                const date = document.getElementById('lesson-date').value;
                const time = document.getElementById('lesson-time').value;
                const typeElement = document.getElementById('lesson-type');
                const lessonType = typeElement.options[typeElement.selectedIndex].text;
                
                try {
                    // Créer le document de réservation
                    const newReservation = {
                        email: email,
                        date: date,
                        time: time,
                        type: lessonType,
                        status: 'En attente',
                        reservedBy: userId,
                        createdAt: serverTimestamp() // Marque la date de création sur le serveur
                    };

                    // Ajouter le document à la collection
                    await addDoc(collection(db, RESERVATIONS_COLLECTION_PATH), newReservation);

                    title = "Réservation Confirmée (Sauvegardée)";
                    content = `Votre réservation pour une <strong>${lessonType}</strong> le <strong>${date}</strong> à <strong>${time}</strong> a été sauvegardée. Notre équipe la traite et vous enverra un email de confirmation (simulé) sous peu.`;

                    // L'admin verra cette nouvelle réservation apparaître immédiatement dans le tableau de bord grâce à onSnapshot.

                } catch (e) {
                    console.error("Erreur d'ajout de document de réservation : ", e);
                    title = "Erreur de Réservation";
                    content = `Une erreur est survenue lors de la sauvegarde de votre réservation. Veuillez vérifier votre connexion. ${e.message}`;
                }
                
            } else if (formType === 'examen') {
                // Logique pour Examen (Simulation, car pas critique pour l'alerte)
                const examType = document.getElementById('exam-type').value;
                const date1 = document.getElementById('exam-date-1').value;
                
                title = "Demande d'Examen Reçue (Simulée)";
                content = `Votre demande pour le permis ${examType} pour le <strong>${date1}</strong> a été enregistrée. Nous la traitons et vous enverrons un email dès que la date est confirmée officiellement (Simulation).`;
            } else if (formType === 'inscription') {
                // Logique pour Inscription (Simulation, car pas critique pour l'alerte)
                title = "Pré-inscription Réussie (Simulée)";
                content = `Félicitations ! Votre dossier a été soumis (Simulation). Veuillez consulter l'email que nous venons de vous envoyer pour la liste des documents à fournir et la finalisation de votre inscription.`;
            }

            // Nettoyer les champs du formulaire après l'envoi
            event.target.reset();

            // Afficher la confirmation
            showMessage(title, content);
        }

        // Initialisation : afficher la section Tarifs par défaut et initialiser Firebase
        document.addEventListener('DOMContentLoaded', () => {
            showSection('conduite'); // Afficher la section Conduite pour voir l'effet du tableau de bord
            initializeFirebase();
        });
    </script>

</body>
</html>

